import{C as t,a as e,b as a,n as r}from"./cookie-universal-common.9e39a315.js";var n=t();n.get("token");function o(t){return c.apply(this,arguments)}function c(){return(c=e(a.mark(function t(e){var o,c,s,i,p,u,h,k,d,m,f,l,x;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.method,c=e.path,s=e.data,i=e.params,p=e.token,u=e.cookie,h=e.auxUrl,k=h||"".concat(r,"/api/").concat(c),d=window.fetch,m={method:o,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",cookie:u},mode:"cors"},s&&(m.body=JSON.stringify(s)),"GET"==o&&i&&(k+="?"+Object.keys(i).map(function(t){return t+"="+i[t]}).join("&")),f=n.get("token"),p?m.headers.Authorization="Bearer ".concat(p):f&&(m.headers.Authorization="Bearer ".concat(f)),t.prev=8,t.next=11,d(k,m);case 11:return l=t.sent,t.next=14,l.text();case 14:if(x=t.sent,l.ok){t.next=17;break}throw x;case 17:return t.prev=17,t.abrupt("return",JSON.parse(x));case 21:return t.prev=21,t.t0=t.catch(17),t.abrupt("return",x);case 24:t.next=29;break;case 26:throw t.prev=26,t.t1=t.catch(8),t.t1;case 29:case"end":return t.stop()}},t,null,[[8,26],[17,21]])}))).apply(this,arguments)}function s(t,e,a,r){return o({method:"GET",path:t,params:e,token:a,cookie:r})}function i(t,e,a,r){return o({method:"POST",path:t,data:e,token:a,auxUrl:r})}export{s as g,i as p};

'use strict';

var index = require('./index-7460d1f3.js');
require('./index-16d8a4c6.js');
require('cookie-universal');
var api = require('./api-87610531.js');
var app = require('./app-69931f76.js');
var index$3 = require('./index-18d9a678.js');
require('./index-eb724975.js');
require('./cart-6b5b4738.js');
var _CartItem = require('./_CartItem-9de1ba95.js');

/* src/routes/my/orders.svelte generated by Svelte v3.16.0 */

const Orders = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let orders;

	async function getOrders() {
		try {
			let o = await api.get("orders/my");
			return orders = o.data;
		} catch(e) {
			app.goto("/login");
		}
	}

	getOrders();

	return `<main>
  <div class="${"lg:px-10 px-2"}">
    <div class="${"flex justify-between items-center my-4"}">
      <a href="${"/my"}">
        <i class="${"fa fa-arrow-left"}"></i>
      </a>
      <div class="${"text-2xl font-bold lg:p-6 text-center lg:text-left"}">
        Orders
      </div>
    </div>
    
    ${(function (__value) {
		if (index.is_promise(__value)) return `
      <div class="${"text-gray-700 font-bold text-xl mb-2"}">
        Please wait. Order being processed.
      </div>
    `;

		return (function (orders) {
			return `
      ${orders.length == 0
			? `<div class="${"text-gray-700 font-bold text-xl mb-2"}">
          No order placed yet.
        </div>`
			: `${index.each(orders, o => `${index.escape(o.orderNo)} -
          <span class="${"text-xs mute"}">${index.escape(index$3.date(o.createdAt))}</span>
          <div class="${"bg-white shadow rounded flex flex-wrap py-3 px-8\n            justify-between hover:shadow-xl"}">
            ${index.each(o.items, item => `${index.validate_component(_CartItem.CartItem, "CartItem").$$render(
					$$result,
					{
						product: {
							name: item.name,
							slug: item.slug,
							_id: item.pid,
							img: item.img
						},
						variant: {
							sku: item.sku,
							size: item.size,
							img: item.img,
							mrp: item.mrp,
							price: item.price,
							_id: item.vid
						},
						qty: item.qty,
						cartButton: false
					},
					{},
					{}
				)}`)}
          </div>`)}`}
    `;
		})(__value);
	})(getOrders())}
  </div>
</main>`;
});

exports.default = Orders;
